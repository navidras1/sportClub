@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    //Layout = null;
}

@*<link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/@@mdi/font@6.x/css/materialdesignicons.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.min.css" rel="stylesheet">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">

<script src="~/js/Vue.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.js"></script>
<script src="~/js/axios.min.js"></script>*@

<div id="loginDiv" class="justify-content-center">


    <template>
        <div style="text-align: right; direction: rtl; width: 322px;  margin: auto;">
            <v-text-field label="نام کاربری"
                          hide-details="auto" v-model="userName"></v-text-field>
            <v-text-field label="رمز عبور" v-model="password"></v-text-field>
            <v-btn v-on:click="login">ورود</v-btn>

            <v-snackbar v-model="snackbar"
                        :timeout="timeout"
                        >
                {{ text }}

                <template v-slot:action="{ attrs }">
                    <v-btn color="red"
                           text
                           v-bind="attrs"
                           @@click="snackbar = false">
                        Close
                    </v-btn>
                </template>
            </v-snackbar>

        </div>
    </template>

    
</div>
<script>

    var app = new Vue({

        el: "#loginDiv",
        vuetify: new Vuetify({
            theme: { dark: true },
        }),
        data: {
            userName: "",
            password: "",
            snackbar: false,
            text: 'نام کاربری یا رمز  اشتباه است .',
            timeout: 3000,
        },
        methods: {
            login: async function () {

                var theUserName = this.userName;
                var thePassword = this.password;
                var LoginModel = { UserName: theUserName, Passwrod: thePassword };
                var vv;
                await axios.post("/General/Login", LoginModel).then(response => vv = response).catch(err => console.log(err));

                if (vv.data.token == "true") {
                    window.location.href="/Home/Index";
                }
                else {
                    this.snackbar = true;

                }
            }

        }

    });
</script>

